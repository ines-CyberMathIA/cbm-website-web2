{"ast":null,"code":"var _jsxFileName = \"/home/install/cybermathia/cbm-website-web2/client/src/components/ManagerDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport TeachersList from './manager/TeachersList';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { Fragment } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ManagerDashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const [showTeacherModal, setShowTeacherModal] = useState(false);\n  const [showTeacherDetails, setShowTeacherDetails] = useState(false);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [teacherAvailabilities, setTeacherAvailabilities] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Vérification de l'authentification manager\n  useEffect(() => {\n    if (!user || user.role !== 'manager') {\n      navigate('/login');\n    }\n  }, [navigate, user]);\n\n  // Fonction pour charger les disponibilités d'un professeur\n  const loadTeacherAvailabilities = async teacherId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`http://localhost:5000/api/teacher/${teacherId}/availabilities`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setTeacherAvailabilities(response.data);\n    } catch (error) {\n      console.error('Erreur lors du chargement des disponibilités:', error);\n    }\n  };\n\n  // Fonction pour ouvrir les détails d'un professeur\n  const handleTeacherClick = async teacher => {\n    setSelectedTeacher(teacher);\n    await loadTeacherAvailabilities(teacher._id);\n    setShowTeacherDetails(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-10\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold leading-tight text-gray-900\",\n            children: \"Dashboard Manager\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"max-w-7xl mx-auto sm:px-6 lg:px-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 py-6 sm:px-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setShowTeacherModal(true),\n                className: \"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",\n                children: \"Inviter un professeur\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white shadow rounded-lg\",\n              children: /*#__PURE__*/_jsxDEV(TeachersList, {\n                onTeacherClick: handleTeacherClick\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), showTeacherModal && /*#__PURE__*/_jsxDEV(TeacherModal, {\n      onClose: () => setShowTeacherModal(false),\n      setError: setError,\n      setLoading: setLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n// Composant Modal pour créer un professeur\n_s(ManagerDashboard, \"PorJAPqsocVg7qo2V/6vVFOP2tI=\", false, function () {\n  return [useNavigate];\n});\n_c = ManagerDashboard;\nconst TeacherModal = ({\n  onClose,\n  setError,\n  setLoading\n}) => {\n  // ... reste du code de la modal ...\n};\n_c2 = TeacherModal;\nexport default ManagerDashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"ManagerDashboard\");\n$RefreshReg$(_c2, \"TeacherModal\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","TeachersList","Dialog","Transition","Fragment","jsxDEV","_jsxDEV","ManagerDashboard","_s","navigate","user","JSON","parse","localStorage","getItem","showTeacherModal","setShowTeacherModal","showTeacherDetails","setShowTeacherDetails","selectedTeacher","setSelectedTeacher","teacherAvailabilities","setTeacherAvailabilities","loading","setLoading","error","setError","role","loadTeacherAvailabilities","teacherId","token","response","get","headers","Authorization","data","console","handleTeacherClick","teacher","_id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onTeacherClick","TeacherModal","onClose","_c","_c2","$RefreshReg$"],"sources":["/home/install/cybermathia/cbm-website-web2/client/src/components/ManagerDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport TeachersList from './manager/TeachersList';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { Fragment } from 'react';\n\nconst ManagerDashboard = () => {\n  const navigate = useNavigate();\n  const user = JSON.parse(localStorage.getItem('user'));\n  const [showTeacherModal, setShowTeacherModal] = useState(false);\n  const [showTeacherDetails, setShowTeacherDetails] = useState(false);\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const [teacherAvailabilities, setTeacherAvailabilities] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Vérification de l'authentification manager\n  useEffect(() => {\n    if (!user || user.role !== 'manager') {\n      navigate('/login');\n    }\n  }, [navigate, user]);\n\n  // Fonction pour charger les disponibilités d'un professeur\n  const loadTeacherAvailabilities = async (teacherId) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get(`http://localhost:5000/api/teacher/${teacherId}/availabilities`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTeacherAvailabilities(response.data);\n    } catch (error) {\n      console.error('Erreur lors du chargement des disponibilités:', error);\n    }\n  };\n\n  // Fonction pour ouvrir les détails d'un professeur\n  const handleTeacherClick = async (teacher) => {\n    setSelectedTeacher(teacher);\n    await loadTeacherAvailabilities(teacher._id);\n    setShowTeacherDetails(true);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100\">\n      <div className=\"py-10\">\n        <header>\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <h1 className=\"text-3xl font-bold leading-tight text-gray-900\">\n              Dashboard Manager\n            </h1>\n          </div>\n        </header>\n        <main>\n          <div className=\"max-w-7xl mx-auto sm:px-6 lg:px-8\">\n            {/* Section des actions */}\n            <div className=\"px-4 py-6 sm:px-0\">\n              <div className=\"flex justify-end mb-6\">\n                <button\n                  onClick={() => setShowTeacherModal(true)}\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n                >\n                  Inviter un professeur\n                </button>\n              </div>\n\n              {/* Liste des professeurs */}\n              <div className=\"bg-white shadow rounded-lg\">\n                <TeachersList onTeacherClick={handleTeacherClick} />\n              </div>\n            </div>\n          </div>\n        </main>\n      </div>\n\n      {/* Modal pour créer un professeur */}\n      {showTeacherModal && (\n        <TeacherModal\n          onClose={() => setShowTeacherModal(false)}\n          setError={setError}\n          setLoading={setLoading}\n        />\n      )}\n    </div>\n  );\n};\n\n// Composant Modal pour créer un professeur\nconst TeacherModal = ({ onClose, setError, setLoading }) => {\n  // ... reste du code de la modal ...\n};\n\nexport default ManagerDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}